webpackJsonp([8],{"TJC/":function(e,o){},wUZA:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=t("3cXf"),i=t.n(s),a=t("iVC1"),r=t("MS2J"),n=(t("YtJ0"),{data:function(){var e=this,o=function(e,o,t){var s=o;r.c(s)?t(new Error("请输入邮箱")):r.a(s,"email")?Object(a.c)(s).then(function(e){!0===e.data?t(new Error("邮箱已被占用")):t()}):t(new Error("邮箱格式不正确"))},t=function(o,t,s){if(r.c(t))s(new Error("请输入验证码"));else{var i="";i="person"===e.labelPosition?e.signUpFormPerson.email:e.signUpFormCompany.email,Object(a.b)({email:i,code:t}).then(function(o){200===o.code?!0===o.data?s():s(new Error("验证码错误")):(s(new Error("验证码错误")),e.$message.error(o.msg))})}},s=function(e,o,t){r.c(o)?t(new Error("请输入密码")):o.length>=6&&o.length<=18?t():t(new Error("密码为6-18位字符串"))},i=function(o,t,s){("person"===e.labelPosition?e.signUpFormPerson.password:e.signUpFormCompany.password)===t?s():s(new Error("两次输入的密码不相同"))};return{companyTypeOptions:[],labelPosition:"person",signInForm:{email:"",password:""},signInRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 18 个字符",trigger:"blur"}]},signUpFormPerson:{email:"",code:"",name:"",sex:"",password:"",repeatPassword:""},signUpPersonRules:{email:[{required:!0,validator:o,trigger:"blur"}],code:[{required:!0,validator:t,trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],password:[{required:!0,validator:s,trigger:"blur"}],repeatPassword:[{required:!0,validator:i,trigger:"blur"}]},signUpFormCompany:{email:"",code:"",contract:"",phone:"",companyName:"",companyType:"",password:"",repeatPassword:""},signUpCompanyRules:{email:[{required:!0,validator:o,trigger:"blur"}],code:[{required:!0,validator:t,trigger:"blur"}],contract:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,validator:s,trigger:"blur"}],repeatPassword:[{required:!0,validator:i,trigger:"blur"}]},signUpDialogVisible:!1,cityDialogVisible:!1,activeIndex:"1",activeIndex2:"1",isLogin:!1,user:{name:""}}},computed:{signInDialogVisible:{get:function(){return this.$store.state.signInDialogVisible},set:function(e){!0===e?this.$store.commit("signInDialogVisibleTrue"):this.$store.commit("signInDialogVisibleFalse")}}},methods:{clearAll:function(){this.$refs.signUpFormPerson.resetFields(),this.$refs.signUpFormCompany.resetFields(),this.labelPosition="person"},sendCode:function(){var e=this,o="";o="person"===this.labelPosition?this.signUpFormPerson.email:this.signUpFormCompany.email,console.log("发送邮件 "+o),r.c(o)||r.a(o,"email")&&Object(a.c)(o).then(function(t){!0!==t.data&&Object(a.i)(o).then(function(o){200===o.code?e.$message.success("验证码已发送,请查收！"):e.$message.error(o.msg)})})},handleSelect:function(e,o){console.log("当前路径"+this.$route.path)},signIn:function(){var e=this,o={email:this.signInForm.email,password:this.signInForm.password};Object(a.r)(o).then(function(o){200===o.code?(e.$message.success("登录成功"),e.loginSucceed(o)):(e.$message.error({message:o.msg}),e.isLogin=!1)}).catch(function(o){console.log(o),e.$message.error("登录失败，网络异常,请重试")})},signOut:function(){var e=this;this.signInForm.phone,this.signInForm.password;Object(a.s)().then(function(o){e.isLogin=!1,200===o.code?(e.$message.success("退出登录成功"),sessionStorage.clear(),localStorage.clear(),e.$router.push({path:"/indexPage"})):(e.$message.error({message:o.msg}),e.isLogin=!1)}).catch(function(o){console.log(o),e.$message.error("登录失败，网络异常,请重试")})},signUp:function(){var e=this;"person"===this.labelPosition?this.$refs.signUpFormPerson.validate(function(o){if(!o)return!1;Object(a.q)(e.signUpFormPerson).then(function(o){200===o.code?(e.$message.success("注册成功"),e.signUpDialogVisible=!1,e.loginSucceed(o)):e.$message.error(o.msg)})}):"company"===this.labelPosition&&this.$refs.signUpFormCompany.validate(function(o){if(!o)return!1;Object(a.e)(e.signUpFormCompany).then(function(o){200===o.code?(e.$message.success("注册成功！"),e.signUpDialogVisible=!1,e.loginSucceed(o)):e.$message.error(o.msg)})})},loginSucceed:function(e){sessionStorage.setItem("token",e.data.t),localStorage.setItem("token",e.data.t),this.user=e.data.u,sessionStorage.setItem("user",i()(e.data.u)),localStorage.setItem("user",i()(e.data.u)),this.signInDialogVisible=!1,this.isLogin=!0}},mounted:function(){var e=this;r.c(localStorage.getItem("token"))||(this.isLogin=!0),r.c(localStorage.getItem("user"))?(console.log("还未登录 "),this.user={name:""}):this.user=JSON.parse(localStorage.getItem("user")),Object(a.h)("company_type").then(function(o){200===o.code?e.companyTypeOptions=o.data:e.$message.err("获取公司类型下拉列表失败"+o.msg)})}}),l={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("section",{staticStyle:{height:"100%"}},[t("el-container",{staticClass:"el-container main-page",staticStyle:{"background-color":"rgb(238,238,238)"}},[t("el-header",{staticStyle:{position:"relative","background-color":"#545c64",padding:"0 9rem"}},[t("div",{staticClass:"home-log",staticStyle:{"background-color":"#545c64",color:"#fff","box-sizing":"border-box"}},[e._v("\n        校园兼职\n        "),t("span",{staticStyle:{"font-size":"1rem","margin-left":"10px",color:"#ffffff"},on:{click:function(o){e.cityDialogVisible=!0}}},[t("i",{staticClass:"el-icon-location-outline"}),e._v("\n            北京\n          ")])]),e._v(" "),t("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":this.$route.path,mode:"horizontal",router:"","background-color":"#545c64","text-color":"#fff","active-text-color":"#409EFF"},on:{select:e.handleSelect}},[t("el-menu-item",{key:"",attrs:{index:"/indexPage"}},[e._v("首页")]),e._v(" "),t("el-menu-item",{attrs:{index:"/jobPage"}},[e._v("兼职查询")]),e._v(" "),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}],attrs:{index:"/userManagerPage"}},[e._v("用户管理")]),e._v(" "),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}],attrs:{index:"/jobTypeManagerPage"}},[e._v("类别管理")]),e._v(" "),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}],attrs:{index:"/companyJobManagerPage"}},[e._v("兼职管理")]),e._v(" "),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}],attrs:{index:"/dataAnalysePage"}},[e._v("数据分析")]),e._v(" "),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}],attrs:{index:"/messagePage"}},[e._v("消息")])],1),e._v(" "),t("div",{staticClass:"main-signIn"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isLogin,expression:"!isLogin"}],staticStyle:{color:"#fff"},attrs:{type:"text"},on:{click:function(o){e.signInDialogVisible=!0}}},[e._v("登录\n        ")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isLogin,expression:"!isLogin"}],staticStyle:{color:"#fff"},attrs:{type:"text"},on:{click:function(o){e.signUpDialogVisible=!0}}},[e._v("注册\n        ")]),e._v(" "),t("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}]},[t("span",{staticStyle:{color:"#fff"}},[e._v("\n              "+e._s(this.user.name)),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("router-link",{attrs:{to:"/personCenter"}},[t("el-dropdown-item",{staticStyle:{"text-align":"center"}},[e._v("个人中心")])],1),e._v(" "),t("el-dropdown-item",{nativeOn:{click:function(o){e.updatePasswordVisible=!0}}},[e._v("修改密码")]),e._v(" "),t("el-dropdown-item",{nativeOn:{click:function(o){return e.signOut(o)}}},[e._v("退出登录")])],1)],1)],1)],1),e._v(" "),t("el-main",{staticStyle:{margin:"15px 8.1rem 15px 8.1rem",padding:"10px 0.9rem 10px 0.9rem","background-color":"#fff"}},[t("keep-alive",[e.$route.meta.keepAlive?t("router-view",{staticStyle:{height:"100%"}}):e._e()],1),e._v(" "),e.$route.meta.keepAlive?e._e():t("router-view",{staticStyle:{height:"100%"}})],1),e._v(" "),t("el-dialog",{attrs:{title:"登录",visible:e.signInDialogVisible,center:"",width:"31%","close-on-click-modal":!1},on:{"update:visible":function(o){e.signInDialogVisible=o}}},[t("el-form",{attrs:{model:e.signInForm,rules:e.signInRules,"label-width":"6.25rem","label-position":"left"}},[t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入邮箱"},model:{value:e.signInForm.email,callback:function(o){e.$set(e.signInForm,"email",o)},expression:"signInForm.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.signInForm.password,callback:function(o){e.$set(e.signInForm,"password",o)},expression:"signInForm.password"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer",center:"true"},slot:"footer"},[t("el-button",{on:{click:function(o){e.signInDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.signIn}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"注册",visible:e.signUpDialogVisible,center:"","close-on-click-modal":!1},on:{"update:visible":function(o){e.signUpDialogVisible=o},close:e.clearAll}},[t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center","margin-bottom":"10px"}},[t("el-radio-group",{attrs:{size:"small"},model:{value:e.labelPosition,callback:function(o){e.labelPosition=o},expression:"labelPosition"}},[t("el-radio-button",{attrs:{label:"person"}},[e._v("普通用户")]),e._v(" "),t("el-radio-button",{attrs:{label:"company"}},[e._v("企业用户")])],1)],1),e._v(" "),t("el-form",{directives:[{name:"show",rawName:"v-show",value:"person"===e.labelPosition,expression:"labelPosition === 'person'"}],ref:"signUpFormPerson",attrs:{model:e.signUpFormPerson,"label-position":"left",rules:e.signUpPersonRules,"label-width":"5rem"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请输入邮箱"},model:{value:e.signUpFormPerson.email,callback:function(o){e.$set(e.signUpFormPerson,"email",o)},expression:"signUpFormPerson.email"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12,label:""}},[t("el-button",{staticStyle:{"margin-left":"4.375rem"},on:{click:e.sendCode}},[e._v("发送验证码")]),e._v(" "),t("el-form-item",{staticStyle:{float:"right"},attrs:{label:"",prop:"code"}},[t("el-input",{staticStyle:{width:"6.75rem"},attrs:{autocomplete:"off",placeholder:"验证码"},model:{value:e.signUpFormPerson.code,callback:function(o){e.$set(e.signUpFormPerson,"code",o)},expression:"signUpFormPerson.code"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请输入姓名"},model:{value:e.signUpFormPerson.name,callback:function(o){e.$set(e.signUpFormPerson,"name",o)},expression:"signUpFormPerson.name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{float:"right"},attrs:{label:"性别",prop:"sex"}},[t("el-radio-group",{staticStyle:{width:"18.75rem"},attrs:{size:"normal"},model:{value:e.signUpFormPerson.sex,callback:function(o){e.$set(e.signUpFormPerson,"sex",o)},expression:"signUpFormPerson.sex"}},[t("el-radio-button",{attrs:{label:"0"}},[e._v("男")]),e._v(" "),t("el-radio-button",{attrs:{label:"1"}},[e._v("女")])],1)],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请输入密码"},model:{value:e.signUpFormPerson.password,callback:function(o){e.$set(e.signUpFormPerson,"password",o)},expression:"signUpFormPerson.password"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{float:"right"},attrs:{label:"重复",prop:"repeatPassword"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请重复密码"},model:{value:e.signUpFormPerson.repeatPassword,callback:function(o){e.$set(e.signUpFormPerson,"repeatPassword",o)},expression:"signUpFormPerson.repeatPassword"}})],1)],1)],1)],1),e._v(" "),t("el-form",{directives:[{name:"show",rawName:"v-show",value:"company"===e.labelPosition,expression:"labelPosition === 'company'"}],ref:"signUpFormCompany",attrs:{model:e.signUpFormCompany,"label-position":"left",rules:e.signUpCompanyRules,"label-width":"5.6rem"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请输入邮箱"},model:{value:e.signUpFormCompany.email,callback:function(o){e.$set(e.signUpFormCompany,"email",o)},expression:"signUpFormCompany.email"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12,label:""}},[t("el-button",{staticStyle:{"margin-left":"3.5rem"},on:{click:e.sendCode}},[e._v("发送验证码")]),e._v(" "),t("el-form-item",{staticStyle:{float:"right"},attrs:{label:"",prop:"code"}},[t("el-input",{staticStyle:{width:"7.75rem"},attrs:{autocomplete:"off",placeholder:"验证码"},model:{value:e.signUpFormCompany.code,callback:function(o){e.$set(e.signUpFormCompany,"code",o)},expression:"signUpFormCompany.code"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"联系人",prop:"contract"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请输入联系人名称"},model:{value:e.signUpFormCompany.contract,callback:function(o){e.$set(e.signUpFormCompany,"contract",o)},expression:"signUpFormCompany.contract"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{float:"right"},attrs:{label:"手机",prop:"phone"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请输入联系人手机号"},model:{value:e.signUpFormCompany.phone,callback:function(o){e.$set(e.signUpFormCompany,"phone",o)},expression:"signUpFormCompany.phone"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请输入密码"},model:{value:e.signUpFormCompany.password,callback:function(o){e.$set(e.signUpFormCompany,"password",o)},expression:"signUpFormCompany.password"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{float:"right"},attrs:{label:"重复",prop:"repeatPassword"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请重复密码"},model:{value:e.signUpFormCompany.repeatPassword,callback:function(o){e.$set(e.signUpFormCompany,"repeatPassword",o)},expression:"signUpFormCompany.repeatPassword"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"公司名",prop:"companyName"}},[t("el-input",{staticStyle:{width:"18.75rem"},attrs:{autocomplete:"off",placeholder:"请输入公司名"},model:{value:e.signUpFormCompany.companyName,callback:function(o){e.$set(e.signUpFormCompany,"companyName",o)},expression:"signUpFormCompany.companyName"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{float:"right"},attrs:{label:"类型",prop:"companyType"}},[t("el-select",{staticStyle:{width:"18.75rem"},attrs:{placeholder:"请选择公司类型"},model:{value:e.signUpFormCompany.companyType,callback:function(o){e.$set(e.signUpFormCompany,"companyType",o)},expression:"signUpFormCompany.companyType"}},e._l(e.companyTypeOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.signUpDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.signUp}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"选择城市",visible:e.cityDialogVisible,center:"",width:"31%","close-on-click-modal":!1},on:{"update:visible":function(o){e.cityDialogVisible=o}}},[t("div",{staticClass:"dialog-footer",attrs:{slot:"footer",center:"true"},slot:"footer"},[t("el-button",{on:{click:function(o){e.cityDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var c=t("C7Lr")(n,l,!1,function(e){t("TJC/")},"data-v-180cd7f6",null);o.default=c.exports}});