webpackJsonp([9],{f4cI:function(e,t){},gBnp:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("a3Yh"),l=i.n(r),a=i("iVC1"),n=(i("YtJ0"),{name:"usermanagerpage",data:function(){var e;return e={filter:{name:"",email:"",userType:"",userStatus:"",pageNum:0,pageSize:10},userList:[],total:0,userTypeList:[],userStatusList:[],editForm:{id:"",userId:"",time:"",content:""},editFormRules:{userId:[{required:!0,message:"请选择执行维护人",trigger:"blur"}],time:[{required:!0,message:"请选择执行维护时间",trigger:"blur"}],content:[{required:!0,message:"请填写维护内容",trigger:"blur"}]},editFormVisible:!1,loading:!1,editFormLoading:!1,listLoading:!1,maintenance:[]},l()(e,"total",0),l()(e,"page",1),l()(e,"device_options",[]),l()(e,"users_options",[]),l()(e,"editForm_users_options",[]),l()(e,"lunarData",[]),e},methods:{resetFilters:function(){this.filter={name:"",email:"",userType:"",userStatus:"",pageNum:0,pageSize:10}},add:function(){},handleCurrentChange:function(e){this.filter.pageNum=e-1,this.query()},query:function(){var e=this;console.log("分页请求"),Object(a.t)(this.filter).then(function(t){200===t.code?(e.userList=t.data.content,e.total=t.data.totalElements):(2===t.code&&e.$store.commit("signInDialogVisibleTrue"),e.$message.error(t.msg))}).catch(function(e){console.log("出错了"+e)})},handleEdit:function(){},handleDel:function(e,t){var i=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.g)(t.id).then(function(e){200===e.code?(i.query(),i.$message.success("删除成功")):(2===e.code&&i.$store.commit("signInDialogVisibleTrue"),i.$message.error(e.msg))})}).catch(function(){})},formatUserType:function(e,t){return 0===e.type?"普通用户":1===e.type?"企业用户":""},formatUserSex:function(e,t){return"0"===e.sex?"男":"1"===e.sex?"女":""}},mounted:function(){var e=this;Object(a.h)("user_type").then(function(t){200===t.code?e.userTypeList=t.data:e.$message.error("用户类型下拉列表获取失败")}),Object(a.h)("user_status").then(function(t){200===t.code?e.userStatusList=t.data:e.$message.error("用户类型下拉列表获取失败")}),this.query()}}),o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[i("div",{staticClass:"global_toolbar",staticStyle:{width:"100%"}},[i("el-form",{ref:"filter",attrs:{inline:!0,model:this.filter}},[i("el-form-item",[e.add?i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.add("other")}}},[i("span",{staticClass:"toolbar_device_add"},[e._v("新增")])]):e._e()],1),e._v(" "),i("el-form-item",[i("el-input",{staticStyle:{width:"14rem"},attrs:{placeholder:"用户名"},model:{value:e.filter.name,callback:function(t){e.$set(e.filter,"name",t)},expression:"filter.name"}})],1),e._v(" "),i("el-form-item",[i("el-input",{staticStyle:{width:"14rem"},attrs:{placeholder:"邮箱"},model:{value:e.filter.email,callback:function(t){e.$set(e.filter,"email",t)},expression:"filter.email"}})],1),e._v(" "),i("el-form-item",[i("el-select",{staticStyle:{width:"14rem"},attrs:{placeholder:"用户类型"},model:{value:e.filter.userType,callback:function(t){e.$set(e.filter,"userType",t)},expression:"filter.userType"}},e._l(e.userTypeList,function(e){return i("el-option",{attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",[i("el-select",{staticStyle:{width:"14rem"},attrs:{placeholder:"用户状态"},model:{value:e.filter.userStatus,callback:function(t){e.$set(e.filter,"userStatus",t)},expression:"filter.userStatus"}},e._l(e.userStatusList,function(e){return i("el-option",{attrs:{label:e.label,value:parseInt(e.value)}})}),1)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"success",icon:"el-icon-search"},nativeOn:{click:function(t){return e.query(t)}}},[e._v("查询")])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.resetFilters(t)}}},[e._v("重置")])],1)],1)],1),e._v(" "),i("div",{staticStyle:{position:"relative"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%",position:"absolute",top:"0",left:"0"},attrs:{data:e.userList,stripe:"","highlight-current-row":"","header-row-class-name":"global_table_th","row-class-name":"global_table_tr","cell-class-name":"global_table_normal"}},[i("el-table-column",{attrs:{prop:"name",label:"用户名","min-width":"30",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"80",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"80",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"60",formatter:e.formatUserSex,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"creditRating",label:"信誉分","min-width":"60",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"type",label:"用户类型","min-width":"80",formatter:e.formatUserType,align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"userStatus",label:"用户状态","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.userStatus?i("el-tag",{attrs:{type:"warning"}},[e._v("账号停用")]):e._e(),e._v(" "),2===t.row.userStatus?i("el-tag",{attrs:{type:"success"}},[e._v("帐号正常")]):e._e(),e._v(" "),4===t.row.userStatus?i("el-tag",{attrs:{type:"danger"}},[e._v("未认证账户")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}})],1),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[i("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(i){return e.handleDel(t.$index,t.row)}}})],1)]}}])})],1)],1),e._v(" "),i("div",{staticClass:"toolbar",staticStyle:{position:"absolute",right:"0",bottom:"10px"},attrs:{span:24}},[i("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.filter.currentPage,"page-size":e.filter.pageSize,layout:"total,  prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)]),e._v(" "),i("el-dialog",{attrs:{title:"添加维护记录",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[i("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"150px",rules:e.editFormRules}},[i("el-form-item",{attrs:{label:"执行维护时间",prop:"time"}},[i("el-date-picker",{attrs:{editable:!1,type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"执行维护时间"},model:{value:e.editForm.time,callback:function(t){e.$set(e.editForm,"time",t)},expression:"editForm.time"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"执行维护人",prop:"userId"}},[i("el-select",{attrs:{placeholder:"执行维护人"},model:{value:e.editForm.userId,callback:function(t){e.$set(e.editForm,"userId",t)},expression:"editForm.userId"}},e._l(e.editForm_users_options,function(e){return i("el-option",{key:e.id,attrs:{label:e.nickName,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"维护内容",prop:"content"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入维护内容"},model:{value:e.editForm.content,callback:function(t){e.$set(e.editForm,"content",t)},expression:"editForm.content"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",loading:e.editFormLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var s=i("C7Lr")(n,o,!1,function(e){i("f4cI")},"data-v-147ab2f0",null);t.default=s.exports}});